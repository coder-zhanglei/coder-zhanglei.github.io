<!DOCTYPE html><html class="theme-next gemini use-motion"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="keywords" content="Hexo, NexT"><link rel="alternate" href="/atom.xml" title="YHNE's blog" type="application/atom+xml"><meta property="og:type" content="website"><meta property="og:title" content="YHNE&#39;s blog"><meta property="og:url" content="http://yoursite.com/page/2/index.html"><meta property="og:site_name" content="YHNE&#39;s blog"><meta property="og:locale" content="default"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="YHNE&#39;s blog"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"Author"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://yoursite.com/page/2/"><title>YHNE's blog</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="default"><div class="container sidebar-position-left page-home"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">YHNE's blog</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>Archives</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>Search</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><section id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/10/24/hexo-文章特性设置/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Zhang Lei"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="YHNE's blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2021/10/24/hexo-文章特性设置/" itemprop="url">hexo 文章特性设置</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-10-24T22:45:11+08:00">2021-10-24 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/初识hexo/" itemprop="url" rel="index"><span itemprop="name">初识hexo</span> </a></span></span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/2021/10/24/hexo-文章特性设置/#SOHUCS" itemprop="discussionUrl"><span id="url::http://yoursite.com/2021/10/24/hexo-文章特性设置/" class="cy_cmt_count" data-xid="2021/10/24/hexo-文章特性设置/" itemprop="commentsCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="为字体添加颜色"><a href="#为字体添加颜色" class="headerlink" title="为字体添加颜色"></a>为字体添加颜色</h2><h3 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h3><p>这是<label style="color:red">红色</label>字体<br>这是<label style="color:green">绿色</label>字体<br>这是<label style="color:#ff0">黄色</label>字体<br>这是<label style="color:#00f">蓝色</label>字体<br>这是<label style="color:#0ff">青色，蓝绿色</label>字体</p><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">这是&lt;label style=&quot;color:red&quot;&gt;红色&lt;/label&gt;字体</span><br><span class="line">这是&lt;label style=&quot;color:green&quot;&gt;绿色&lt;/label&gt;字体</span><br><span class="line">这是&lt;label style=&quot;color:yellow&quot;&gt;黄色&lt;/label&gt;字体</span><br><span class="line">这是&lt;label style=&quot;color:blue&quot;&gt;蓝色&lt;/label&gt;字体</span><br><span class="line">这是&lt;label style=&quot;color:cyan&quot;&gt;青色，蓝绿色&lt;/label&gt;字体</span><br></pre></td></tr></table></figure><h2 id="文字风格设置"><a href="#文字风格设置" class="headerlink" title="文字风格设置"></a>文字风格设置</h2><p>内容块</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; 这里的内容显示在内容块中</span><br></pre></td></tr></table></figure><p>显示效果</p><blockquote><p>这里的内容是在内容快中显示的</p></blockquote><p>删除线（中划线），需要使用“~”来包含需要删除线的文本</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~~fsadfsa~~</span><br></pre></td></tr></table></figure><p>效果显示</p><blockquote><p><del>fsadfsa</del></p></blockquote><p>下划线<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;u&gt;下划线的文本&lt;/u&gt;</span><br></pre></td></tr></table></figure><p></p><p>效果显示</p><blockquote><p><u>下划线的文本</u></p></blockquote><p>粗体+斜体，需要使用“***”，也就是三个星号，来包含需要粗体和斜体的文本<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">***也就是三个星号***</span><br></pre></td></tr></table></figure><p></p><p>显示效果</p><blockquote><p><strong><em>也就是三个星号</em></strong></p></blockquote><p>斜体，需要使用“*”，也就是一个星号，来包含需要斜体的文本</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*也就是一个星号*</span><br></pre></td></tr></table></figure><p>效果显示</p><blockquote><p><em>也就是一个星号</em></p></blockquote></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/10/24/hexo-迁移/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Zhang Lei"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="YHNE's blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2021/10/24/hexo-迁移/" itemprop="url">hexo 迁移</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-10-24T22:45:11+08:00">2021-10-24 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/初识hexo/" itemprop="url" rel="index"><span itemprop="name">初识hexo</span> </a></span></span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/2021/10/24/hexo-迁移/#SOHUCS" itemprop="discussionUrl"><span id="url::http://yoursite.com/2021/10/24/hexo-迁移/" class="cy_cmt_count" data-xid="2021/10/24/hexo-迁移/" itemprop="commentsCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="迁移时候主要用到可参考的博客"><a href="#迁移时候主要用到可参考的博客" class="headerlink" title="迁移时候主要用到可参考的博客"></a>迁移时候主要用到可参考的博客</h2><ul><li><a href="https://www.cnblogs.com/iHeling/p/14095937.html" target="_blank" rel="noopener">https://www.cnblogs.com/iHeling/p/14095937.html</a></li></ul><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ul><li>先安装必备软件<label style="color:red">git</label>, <label style="color:red">node.js</label>,</li></ul><h2 id="必备文件"><a href="#必备文件" class="headerlink" title="必备文件"></a>必备文件</h2><ul><li>从之前的博客文件夹中选择必须要拷贝的文件，备份起来。首先是之前自己修改的文件，像配置文件_config.yml,theme文件夹，source文件夹自己写的原始文件这些都是必须要拷贝走的。除此之外还有scaffolds文件夹(文件的模板)，package.json(使用哪些包)，.gitignore(提交忽略哪些文件夹)</li><li>总结：</li><li>_config.yml</li><li>themes</li><li>source</li><li>scaffolds</li><li>package.json</li><li>.gitignore<br>是需要备份的，其他文件不需要管。</li></ul><h2 id="开始迁移"><a href="#开始迁移" class="headerlink" title="开始迁移"></a>开始迁移</h2><h3 id="安装hexo软件"><a href="#安装hexo软件" class="headerlink" title="安装hexo软件"></a>安装hexo软件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 全局安装hexo</span></span><br><span class="line">npm install hexo-cli -g</span><br><span class="line"></span><br><span class="line"><span class="comment"># 把必须拷贝的文件，拷贝到新建的文件夹内，执行以下命令</span></span><br><span class="line"><span class="comment"># 在新建的文件夹内打开命令行，安装必要的模块，初始化</span></span><br><span class="line"><span class="comment"># 这里不用hexo init初始化，因为配置文件我们已经拷贝过来</span></span><br><span class="line"></span><br><span class="line">npm install  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装其他一些必要的组件</span></span><br><span class="line">npm install hexo-deployer-git --save</span><br><span class="line"></span><br><span class="line">npm install hexo-generator-feed --save</span><br><span class="line"></span><br><span class="line">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure><h3 id="迁移hexo用到的相关命令"><a href="#迁移hexo用到的相关命令" class="headerlink" title="迁移hexo用到的相关命令"></a>迁移hexo用到的相关命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">"coder-zhanglei"</span> <span class="comment">#设置用户名</span></span><br><span class="line">git config --global user.email <span class="string">"1357028281@qq.com"</span> <span class="comment">#设置邮箱</span></span><br><span class="line">git config user.name <span class="comment">#查询设置的用户名</span></span><br><span class="line">git config user.email <span class="comment">#查询设置的邮箱</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 正式部署</span></span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br></pre></td></tr></table></figure><h2 id="MARKDOWn编辑"><a href="#MARKDOWn编辑" class="headerlink" title="MARKDOWn编辑"></a>MARKDOWn编辑</h2><h3 id="vscode安装如下插件即可实现markdown语法的编辑"><a href="#vscode安装如下插件即可实现markdown语法的编辑" class="headerlink" title="vscode安装如下插件即可实现markdown语法的编辑"></a>vscode安装如下插件即可实现markdown语法的编辑</h3><ul><li>1、markdown all in one</li><li>2、markdown Preview enhanced，将原生markdown预览的黑色背景改为白色</li><li>3、markdown preview github stying，Github风格的预览</li></ul><label style="color:red">注：这三个插件是实现markdown编辑预览的基本插件，实现更多的markdown语法的功能，可探索更多相关的插件。</label><h3 id="问题记录"><a href="#问题记录" class="headerlink" title="问题记录"></a>问题记录</h3><p>1、 hexo d提交时出现错误：<em>FATAL Something’s wrong. Maybe you can find the solution here: <a href="http://hexo.io/do" target="_blank" rel="noopener">http://hexo.io/do</a> TypeError [ERR_INVALID_ARG_TYPE]</em>:</p><label style="color:red">解决方法：</label>该问题是node.js版本过高，切换会旧版本即可，旧版本为：node-v12.22.9-x64.msi<br><br>2、 OpenSSL SSL_read: Connection was reset, <label style="color:red">errno 10054</label> <label style="color:red">解决方法：</label>执行命令<br><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.sslVerify <span class="string">"false"</span></span><br></pre></td></tr></table></figure><br><br>3、 Failed to connect to github.com <label style="color:red">port 443 after 21098 ms:</label> Timed out<br><br><label style="color:red">解决方法：</label><p><label style="color:#00f">解决方法：</label>我们直接在终端先输入设置代理的命令，再输入取消代理的命令即可解决</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global https.proxy</span><br><span class="line">git config --global --<span class="built_in">unset</span> https.proxy</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/31/FPGA电子系统设计方法/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Zhang Lei"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="YHNE's blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2019/12/31/FPGA电子系统设计方法/" itemprop="url">FPGA电子系统设计方法</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-31T10:33:06+08:00">2019-12-31 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/FPGA学习笔记/" itemprop="url" rel="index"><span itemprop="name">FPGA学习笔记</span> </a></span></span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/2019/12/31/FPGA电子系统设计方法/#SOHUCS" itemprop="discussionUrl"><span id="url::http://yoursite.com/2019/12/31/FPGA电子系统设计方法/" class="cy_cmt_count" data-xid="2019/12/31/FPGA电子系统设计方法/" itemprop="commentsCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="电子系统设计步骤"><a href="#电子系统设计步骤" class="headerlink" title="电子系统设计步骤"></a>电子系统设计步骤</h2><p>电子系统设计–&gt; 电子系统实验调试–&gt; 制作电路板–&gt;电子系统安装–&gt; 电子系统调试–&gt; 合格成品</p><h3 id="总体方案确定"><a href="#总体方案确定" class="headerlink" title="总体方案确定"></a>总体方案确定</h3><p>根据掌握的资料，将总体系统分为若干个子系统（硬件单元电路。软件设计的功能模块），并画出有各个子系统相互连接而形成系统原理框图。<br>多分析，多思考，多比较，要从稳定性、工作可靠性、电路简单、成本低、功耗小、调试维修方便等方面综合考量，选出最佳方案。</p><p>1、硬件单元电路设计<br>为了使电子系统的体积小，可靠性高，单元电路尽可能使集成电路组成。计算单元电路参数时应注意以下几点：<br>（1） 在计算元器件工作电流、电压和功率等参数时，应考虑工作条件最为不利的情况，并留有适当的余量。<br>（2） 对于原器件的极限参数必须留有足够的余量，一般取1.5~2倍的额定值<br>（3） 对于电阻、电容参数的取值，应选计算值附近的标称值。电阻值一般在1MΩ内选择：非电解电容一般在100pf~0.47F选择；电解电容一般在1~2000uf范围内选用。<br>（4）在保证电路达到功能指标要求的前提下。尽量减少元器件的品种，价格，体积等。<br>2、软件设计<br>软件设计首先要完成功能模块的设计，功能模块设计好后可以反复使用。用VHDL语言编程写功能模块，用图形输入的方法将各个功能模块连接起来。<br>3、元器件的选择<br>（1）一般优先选择集成电路<br>（2）电阻器和电容器是两种最长见的元器件<br>（3）分立半导体的选择<br>4、计算机模拟仿真<br>5、实验调试<br>6、绘总体电路图<br>（1） 总体电路图尽可能画在同一张图上；注意信号的流向，一般从输入端画起，由左向右或由上至下按信号的流向依次画出各单元电路。<br>（2） 注意总体电路图的紧凑和协调，要求布局合理、排列均匀。<br>（3） 连线一般画成水平线或垂直线，尽可能的减少交叉和拐弯。</p><h3 id="元器件布局与布线"><a href="#元器件布局与布线" class="headerlink" title="元器件布局与布线"></a>元器件布局与布线</h3><p>1、 按照信号流走向布局<br>2、 优先确定特殊元器件位置<br>3、 防止电磁干扰<br>（1）减小磁力线对印制导线的切割<br>（2）两个电感类元件的位置应当使它们的磁场方向相互垂直，减小彼此间的磁力线耦合<br>（3）对干扰源进行磁屏蔽，屏蔽罩应该良好接地<br>（4）使用高频电缆直接传输信号时，电缆的屏蔽层应该一端接地<br>4、抑制热干扰<br>首先要区分发热元器件和温度敏感元器件，尽量不要把几个发热元器件放在一起，并且考虑使用散热器或小风扇等装置，使元器件的温升不超过允许值。大功率器件可以直接固定在机壳上，利用金属外壳传导散热。</p><h3 id="印制焊盘的尺寸及形状"><a href="#印制焊盘的尺寸及形状" class="headerlink" title="印制焊盘的尺寸及形状"></a>印制焊盘的尺寸及形状</h3><p>1、焊盘的内径（引线孔的直径）<br>2、焊盘的外径<br>3、焊盘形状<br>4、灵活设计焊盘</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/02/软件工程-第二章：系统设计/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Zhang Lei"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="YHNE's blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2019/11/02/软件工程-第二章：系统设计/" itemprop="url">软件工程-第二章：系统设计</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-02T20:00:24+08:00">2019-11-02 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/软件工程学习/" itemprop="url" rel="index"><span itemprop="name">软件工程学习</span> </a></span></span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/2019/11/02/软件工程-第二章：系统设计/#SOHUCS" itemprop="discussionUrl"><span id="url::http://yoursite.com/2019/11/02/软件工程-第二章：系统设计/" class="cy_cmt_count" data-xid="2019/11/02/软件工程-第二章：系统设计/" itemprop="commentsCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="结构化分析"><a href="#结构化分析" class="headerlink" title="结构化分析"></a>结构化分析</h2><p>结构化方法遵循的原理是自顶向下、逐步求精，使用的工具有数据流图、数据字典、判定表、判定树和结构化语言等。<br>1969年Bohm和jacopini首次证明了只要用三种结构（顺序，选择和循环）就能表达一个入口和出口的流程图所能表达的任何程序<br>逻辑。</p><h2 id="面向对象分析的基本过程"><a href="#面向对象分析的基本过程" class="headerlink" title="面向对象分析的基本过程"></a>面向对象分析的基本过程</h2><p>需求陈述的内容包括问题范围、功能需求、性能需求、应用环境及假设条件等。</p><h3 id="基本模型"><a href="#基本模型" class="headerlink" title="基本模型"></a>基本模型</h3><p>面向对象建模得到模型包含对象的三个要素：对象模型（静态结构）、交互次序（动态结构）和数据变换（功能模型）。大型系统的对<br>象模型由4个层次组成：主题层、对象层、特征层（可细分为属性层、服务层）、关系层。</p><h2 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h2><p>结构设计的一般准则：划分模块时，尽量做到高内聚，低耦合，保持模块的相对独立性，以此为原则优化初始化的软件结构。</p><h3 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h3><p>所有软件结构设计都是要以模块化为基础，模块由单独命名和可编程的构件集成，以满足问题的需求。模块的基本属性有：</p><ul><li>接口：模块的输入输出口</li><li>功能：指模块实现什么功能</li><li>逻辑：描述内部如何实现要求的功能及所需的数据</li><li>状态：指模块的运行环境，即模块的调用与被调用关系<br>在设计模块时要考虑软件的模块数目、模块接口成本和软件总成本之间的关系。<br>模块数越多接口越多。<h4 id="模块的耦合"><a href="#模块的耦合" class="headerlink" title="模块的耦合"></a>模块的耦合</h4>耦合表示软件结构内不同模块彼此之间相互依赖的紧密程度，是衡量软件模块结构质量好坏的度量。软件设计应追求尽可能的松散合<br>，避免强耦合。越松散，模块间的联系就越少。模块的独立性就越强。<br>一般的耦合分为：数据、控制、公共环境、内容和标记耦合。<br>耦合原则：尽量使用数据耦合，少使用控制耦合，限制公共耦合，完全不使用内容耦合。<h4 id="模块的内聚"><a href="#模块的内聚" class="headerlink" title="模块的内聚"></a>模块的内聚</h4>内聚标志一个模块内各个元素彼此结合的紧密程度，它是信息隐蔽和局部化概念的自然扩展。简单的说，理想内聚的模块只做一件事<br>。<br>模块尽量使用高内聚，少用中内聚，不用低内聚。<h3 id="设计的优化"><a href="#设计的优化" class="headerlink" title="设计的优化"></a>设计的优化</h3>（1） 输入部分求精<br>（2） 输出部分求精<br>（3） 变化部分求精<h3 id="详细设计"><a href="#详细设计" class="headerlink" title="详细设计"></a>详细设计</h3>描述详细设计的常用的三种工具：图形，表格和语言，以下是设计的具体方法。</li><li>结构化语言</li><li>判定表</li><li>判定树</li><li>结构化程序设计<h3 id="面向对象设计"><a href="#面向对象设计" class="headerlink" title="面向对象设计"></a>面向对象设计</h3><h4 id="面向对象抽象方法"><a href="#面向对象抽象方法" class="headerlink" title="面向对象抽象方法"></a>面向对象抽象方法</h4>分类的原则是抽象，即忽略事物的非本质特征，只注意那些与当前目标相关的本质特征，从而找出事物的特性，把具有共同性质的事<br>物划分为一类，得到一个抽象的概念。<br>面向对象方法支持过程抽象和数据抽象。类似一种抽象数据类型，对外提供方法，对内封装数据及实现。参数化抽象是指在类的规格<br>说明描述时，不具体说明所要操作的数据类型，而是把数据类型作为参数。这使得类的抽象程度更高。比如c++中的“模板”机制。</li></ul><h4 id="面向对象的基本原理"><a href="#面向对象的基本原理" class="headerlink" title="面向对象的基本原理"></a>面向对象的基本原理</h4><p>面向对象的而基本原理如下：<br>（1） 抽象（过程，数据）<br>（2） 封装<br>（3） 继承<br>（4） 消息<br>（5） 组织方法（对象和属性、类专成员、整体与部分）<br>（6） 功能分类（基本函数，状态-文件-响应、对象生命历程）<br>（7） 分类结论<br>（8） 组织结构<br>（9） 实例连接<br>（10） 消息连接</p><h2 id="数据库系统模型和结构"><a href="#数据库系统模型和结构" class="headerlink" title="数据库系统模型和结构"></a>数据库系统模型和结构</h2><h3 id="数据库模型"><a href="#数据库模型" class="headerlink" title="数据库模型"></a>数据库模型</h3><p>（1） 层次模型<br>（2） 网状模型<br>（3） 关系模型<br>（4） 数据独立存取模型</p><h3 id="关系数据库的范式理论"><a href="#关系数据库的范式理论" class="headerlink" title="关系数据库的范式理论"></a>关系数据库的范式理论</h3><p>有5中不同层次的范式：第一范式（1nf）、第二范式（2nf）、第三范式（3nf）、第四范式（4nf）、第五范式（5nf）。一个<br>低一级范式的关系模型，通过分解方法转换为若干个高一级范式的关系模式的集合，称为规范化。</p><h4 id="第一范式"><a href="#第一范式" class="headerlink" title="第一范式"></a>第一范式</h4><p>要求元组中的每一个数据项都不能再分割，都是原子项，记作1NF。简单的说就是表中每一个元素都是单一的、不可再分的数据。</p><h4 id="第二范式"><a href="#第二范式" class="headerlink" title="第二范式"></a>第二范式</h4><p>满足第一范式，并且每个非关键字属性都完全依赖于主关键字。</p><h4 id="第三范式"><a href="#第三范式" class="headerlink" title="第三范式"></a>第三范式</h4><p>符合第二范式，所有非关键字属性之间不存在函数依赖关系。即非主关键字不能拆分为其他关键字的组合。</p><h4 id="第四范式"><a href="#第四范式" class="headerlink" title="第四范式"></a>第四范式</h4><p>符合第三范式，在关系模型中没有超过一个的多值事实。多值事实就是某个属性有若干个值，这些值由另一个属性的一个值决定。</p><h4 id="第五范式"><a href="#第五范式" class="headerlink" title="第五范式"></a>第五范式</h4><p>符合第五范式的表不能分解成两个或则多个表，且不丢失信息。</p><h3 id="范式之间的关系"><a href="#范式之间的关系" class="headerlink" title="范式之间的关系"></a>范式之间的关系</h3><p>一般程度来说，规范化程度低会造成数据冗余和操作异常，但是范式程度低则检索直接，处理比较简单；范式程度高可以减少操作异<br>常和减少数据冗余，但是规范化程度高则在检索是要访问更多的关系，即需要做更多的操作，比较复杂。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/22/matlab-最优化设计/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Zhang Lei"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="YHNE's blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2019/08/22/matlab-最优化设计/" itemprop="url">matlab 最优化设计</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-22T17:27:59+08:00">2019-08-22 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/matlab学习/" itemprop="url" rel="index"><span itemprop="name">matlab学习</span> </a></span></span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/2019/08/22/matlab-最优化设计/#SOHUCS" itemprop="discussionUrl"><span id="url::http://yoursite.com/2019/08/22/matlab-最优化设计/" class="cy_cmt_count" data-xid="2019/08/22/matlab-最优化设计/" itemprop="commentsCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="线性规划（line-programming）"><a href="#线性规划（line-programming）" class="headerlink" title="线性规划（line programming）"></a>线性规划（line programming）</h2><h3 id="MATLAB-求解"><a href="#MATLAB-求解" class="headerlink" title="MATLAB 求解"></a>MATLAB 求解</h3><ul><li>lineprog()是解线性规划的命令。调用格式在软件中可查。</li><li>lsqnonlin()是解决非线性最小二乘法问题。<h2 id="数理统计分析"><a href="#数理统计分析" class="headerlink" title="数理统计分析"></a>数理统计分析</h2>对离散数据和连续数据进行分析处理，即数理统计分析。matlab中包括曲线拟合和回归分析。<h3 id="均值"><a href="#均值" class="headerlink" title="均值"></a>均值</h3>计算样本均值的函数是mean。<h2 id="样本方差与标准差"><a href="#样本方差与标准差" class="headerlink" title="样本方差与标准差"></a>样本方差与标准差</h2>计算样本方差的函数是var；<br>标准差的函数为std；<h2 id="协方差和相关系数"><a href="#协方差和相关系数" class="headerlink" title="协方差和相关系数"></a>协方差和相关系数</h2>计算协方差的函数为cov；<br>计算相关系数的函数为corroef；<br>lyfit(x,y,n):表示用二乘法对已知数据x，y进行拟合，以求得n阶多项式系数向量。<br>[p,s] = polyfit(x,y,n) p为拟合多项式系数向量，s为拟合多项式系数向量的信息结构。<h3 id="函数线性组合"><a href="#函数线性组合" class="headerlink" title="函数线性组合"></a>函数线性组合</h3>g(x) = c1 + c2e^-2x + c3cos(-2x)e^-4x + c4x^2;求出待定系数。<br>实验数据<br>| x | 0 | 0.2 | 0.4 | 0.7 | 0.9 | 0.92 |<br>| y | 2.88 | 2.2576 | 1.9638 | 1.9258 | 2.0862 | 2.109 |<br>解：<br>（1） 编写M文件<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">yy</span> = <span class="title">linefit2</span><span class="params">(x,y,A)</span></span></span><br><span class="line">n = <span class="built_in">length</span>(x);</span><br><span class="line">y = <span class="built_in">reshape</span>(y,n,<span class="number">1</span>);</span><br><span class="line">A = A';</span><br><span class="line">yy = A\y;</span><br><span class="line">yy = yy';</span><br></pre></td></tr></table></figure></li></ul><p>(2) 变量量矩阵<br></p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x = [<span class="number">0</span> <span class="number">0.2</span> <span class="number">0.4</span> <span class="number">0.7</span> <span class="number">0.9</span> <span class="number">0.92</span>];</span><br><span class="line">y = [<span class="number">2.88</span> <span class="number">2.2576</span> <span class="number">1.9638</span> <span class="number">1.9258</span> <span class="number">2.0862</span> <span class="number">2.109</span>];</span><br></pre></td></tr></table></figure><p></p><p>(3) 输入表达式<br></p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A = [<span class="built_in">ones</span>(<span class="built_in">size</span>(x)); <span class="built_in">exp</span>(<span class="number">-2</span>*x);<span class="built_in">cos</span>(<span class="number">-2</span>*x).*<span class="built_in">exp</span>(<span class="number">-4</span>*x);x.^<span class="number">2</span>];</span><br></pre></td></tr></table></figure><p></p><p>(4) 调用linefit2函数<br></p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yy = linefit2(x,y,A);</span><br></pre></td></tr></table></figure><p></p><p>(5) 绘制图形<br></p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">plot</span>(x,y1);</span><br><span class="line">x = [<span class="number">0</span>:<span class="number">0.01</span>:<span class="number">0.92</span>]';</span><br><span class="line">A1 = [<span class="built_in">ones</span>(<span class="built_in">size</span>(x)); <span class="built_in">exp</span>(<span class="number">-2</span>*x);<span class="built_in">cos</span>(<span class="number">-2</span>*x).*<span class="built_in">exp</span>(<span class="number">-4</span>*x);x.^<span class="number">2</span>];</span><br><span class="line">y1 = A1 * yy';</span><br><span class="line"><span class="built_in">plot</span>(x,y1);</span><br></pre></td></tr></table></figure><p></p><h2 id="最小二乘法曲线拟合"><a href="#最小二乘法曲线拟合" class="headerlink" title="最小二乘法曲线拟合"></a>最小二乘法曲线拟合</h2><p>MATLAB提供了polyfit函数命令进行最小二乘法的曲线拟合。<br>p = ployfit(x,y,n) 对向量x和y进行n维多项式的最小二乘拟合，输出结果P为含有n+1个元素的行向量，该向量以维数递减的形式给出多项式的系数。n为次数。</p><h2 id="回归分析"><a href="#回归分析" class="headerlink" title="回归分析"></a>回归分析</h2><p>变量之间的关系可以分为两种：确定性的函数关系和不确定性统计关系。统计分析是研究统计关系的一种数学方法，<strong>可以由一个变量的值去估计另一个变量的值。</strong></p><h3 id="一元线性回归"><a href="#一元线性回归" class="headerlink" title="一元线性回归"></a>一元线性回归</h3><p>如果在总体中，因变量与自变量的统计关系符合一元线性的正态误差模型，即对给定的Xi有Yi=b0+b1xi+ε。<br>matlab提供的一元线性回归函数为polyfit，因为一元线性回归其实就是一阶多项式拟合。</p><h3 id="多元线性回归"><a href="#多元线性回归" class="headerlink" title="多元线性回归"></a>多元线性回归</h3><p>对于因变量y的全面解释往往需要多个自变量的共同作用。当有p个自变量x1,x2,…..xp时，多元线性回归的理论模型为：<br>y = β0+β1x1+….+βxp+ε;<br>其中，ε是随机误差，E(ε) = 0；<br>matlab提供了regress函数进行多元线性回归，。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/07/matlab-图形绘制/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Zhang Lei"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="YHNE's blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2019/08/07/matlab-图形绘制/" itemprop="url">matlab 图形绘制</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-07T15:29:45+08:00">2019-08-07 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/matlab学习/" itemprop="url" rel="index"><span itemprop="name">matlab学习</span> </a></span></span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/2019/08/07/matlab-图形绘制/#SOHUCS" itemprop="discussionUrl"><span id="url::http://yoursite.com/2019/08/07/matlab-图形绘制/" class="cy_cmt_count" data-xid="2019/08/07/matlab-图形绘制/" itemprop="commentsCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="二维曲线的绘制"><a href="#二维曲线的绘制" class="headerlink" title="二维曲线的绘制"></a>二维曲线的绘制</h2><h3 id="相关的绘图命令"><a href="#相关的绘图命令" class="headerlink" title="相关的绘图命令"></a>相关的绘图命令</h3><p>1、 figure</p><ul><li>figure：创建一个图形窗口。</li><li>figure(n)：n是正整数，创建一个编号为n的图形窗口</li><li>figure(‘PropertyName’,’PropertyValue’,…):对指定的属性PropertyName，用指定的属性值PropertyValue创建一个新的图形窗口。<br>2、 plot</li><li>plot(x)</li><li>plot(x,y)</li><li>plot(x1,y1,x2,y2)</li><li>plot(x,y,s)其中x，y为向量或矩阵，s为用单引号标记的字符串，用来设置所画数据点的类型、大小、颜色以及数据点之间的连线的类型、粗细、颜色等。实际应用中，s是某些字母或符号的组合。</li><li>plot(x1,y1,s1,x2,y2,s2……)<br>3、 多图形显示<br>(1)、 图形分割</li><li>subplot(m,n,p)将当前窗口分割为m×n个视图区域，并指定地p个视图为当前视图。</li><li>subplot(‘position’,[left bottom width height]):产生的新子区域的位置由用户指定，后面的四元组为区域的具体参数控制，宽高的取值范围都是[0,9]</li></ul><h3 id="图形的叠加"><a href="#图形的叠加" class="headerlink" title="图形的叠加"></a>图形的叠加</h3><p>图形保持命令hold on/off控制原有图形的保持与不保持</p><h3 id="一元函数的绘制fplot"><a href="#一元函数的绘制fplot" class="headerlink" title="一元函数的绘制fplot"></a>一元函数的绘制fplot</h3><ul><li>plot命令是依据给定的数据点来做图的，在实际情况中，一般不清楚函数具体情况，因此依据所选取的数据点作图可能会忽略真实函数的某些特性。</li><li>fplot命令用于指导数据点的选取，通过其内部自适应算法，在函数变化比较平稳处，它所区的值相对稀疏些，在函数变化明显处取的数据点自动密一些。</li></ul><h3 id="图形注释"><a href="#图形注释" class="headerlink" title="图形注释"></a>图形注释</h3><ul><li>title(‘string’),title(fname)</li><li>h = title(….)</li><li>xlable(‘string’)在当前轴对象中的x轴标注说明语句string</li><li>ylabel(‘’)在当前轴对象中的y轴标注说明语句string</li><li>text(x,y,’string’)在图形中指定的位置（x,y）上显示字符串string</li><li>gtext（‘string’,’property’,’propertyvalue’）可以让鼠标在图形的任意位置进行标注。<h3 id="图例标注"><a href="#图例标注" class="headerlink" title="图例标注"></a>图例标注</h3>当在一幅图中出现多种曲线时，用户可以根据自己的需要，利用legend命令对不同的图例进行说明。</li></ul><h2 id="编译-m文件"><a href="#编译-m文件" class="headerlink" title="编译.m文件"></a>编译.m文件</h2><p>在命令窗口中输入<br></p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mcc -m test.m</span><br></pre></td></tr></table></figure><p></p><h2 id="动画演示"><a href="#动画演示" class="headerlink" title="动画演示"></a>动画演示</h2><p>1、 利用moviein命令对内存进行初始化，创建一个足够大的矩阵，使其能够容纳基于当前坐标轴大小的一系列指定的图形（帧）；moviein(n)可以创建一个足够大的n列矩阵。<br>2、 利用getframe命令生成每个帧。<br>3、 利用movie命令按照指定的速度和次数运行该动画，movie(M,n)可以播放由矩阵M所定义的画面n次默认n时，播放一次。<br></p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[X,Y,Z] = peaks(<span class="number">30</span>);</span><br><span class="line">surf(X,Y,Z)</span><br><span class="line">axis([<span class="number">-3</span>,<span class="number">3</span>,<span class="number">-3</span>,<span class="number">3</span>,<span class="number">-10</span>,<span class="number">10</span>])</span><br><span class="line">axis off</span><br><span class="line">shading interp</span><br><span class="line">colormap(hot)</span><br><span class="line">M = moviein(<span class="number">20</span>);<span class="comment">%建立一个20列的大矩阵</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>= <span class="number">1</span>:<span class="number">20</span></span><br><span class="line">    view(<span class="number">-37.5</span>+<span class="number">24</span>*(<span class="built_in">i</span><span class="number">-1</span>),<span class="number">30</span>)<span class="comment">%改变视点</span></span><br><span class="line">    M(:,<span class="built_in">i</span>) = getframe; <span class="comment">%将图像保存到M矩阵中</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">movie(M,<span class="number">2</span>)<span class="comment">%画面播放两次</span></span><br></pre></td></tr></table></figure><p></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/03/matlab-程序设计基础/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Zhang Lei"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="YHNE's blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2019/08/03/matlab-程序设计基础/" itemprop="url">matlab 程序设计基础</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-03T15:10:40+08:00">2019-08-03 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/matlab学习/" itemprop="url" rel="index"><span itemprop="name">matlab学习</span> </a></span></span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/2019/08/03/matlab-程序设计基础/#SOHUCS" itemprop="discussionUrl"><span id="url::http://yoursite.com/2019/08/03/matlab-程序设计基础/" class="cy_cmt_count" data-xid="2019/08/03/matlab-程序设计基础/" itemprop="commentsCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="程序结构"><a href="#程序结构" class="headerlink" title="程序结构"></a>程序结构</h2><p>程序设计语言，程序结构大致可分为顺序结构，循环结构，与分支结构三类。</p><h3 id="程序流程控制指令"><a href="#程序流程控制指令" class="headerlink" title="程序流程控制指令"></a>程序流程控制指令</h3><p>1、 中断命令break<br>2、 return命令<br>3、 等待用户反应命令pause<br>pause指令是暂停指令。程序运行时，到pause指令执行后，程序将暂停，等待用户按任意键后而继续执行。</p><ul><li>pause 暂停程序等待回应</li><li>pause(n) 程序运行过程中，等待n秒后继续运行</li><li>pause on 显示其后的pause指令，并执行pause指令</li><li>pause off 显示其后的pause指令，但不执行该指令<h2 id="人机交互语句"><a href="#人机交互语句" class="headerlink" title="人机交互语句"></a>人机交互语句</h2>1、 input命令<br>v= input(‘string’) %以文本字符串string为信息给出用户提示信息，将用户输入的内容赋值给变量v<br>v = input(‘string’,’s’) % 以文本字符串string为信息给出用户提示信息，将用户输入的内容作为字符串赋值给变量v<br>2、 keyboard命令<br>是调用键盘命令。当用户输入return并按enter键后，控制权交还给M文件。<br>3、 menu命令<br>生成一个菜单供用户选择输入<br>k = menu(‘mtitle’,’opt1’,’opt2’,…..,’optn’)<h2 id="子函数与私有函数"><a href="#子函数与私有函数" class="headerlink" title="子函数与私有函数"></a>子函数与私有函数</h2><h3 id="子函数"><a href="#子函数" class="headerlink" title="子函数"></a>子函数</h3>在函数文件中定义的函数作为主函数，而在函数体内定义的其他函数均被视作子函数。子函数只能为主函数或同一主函数下其他的子函数所调用。<h3 id="私有函数"><a href="#私有函数" class="headerlink" title="私有函数"></a>私有函数</h3>MATLAB语言中把放置在目录private下的函数称为私有函数，这些函数只有private目录的父目录中的函数才能调用，其他目录的函数不能调用</li></ul><h3 id="子函数与私有函数的区别"><a href="#子函数与私有函数的区别" class="headerlink" title="子函数与私有函数的区别"></a>子函数与私有函数的区别</h3><p>1、 私有函数在可用的范围上大于子函数<br>2、 在函数编辑上的结构上，私有函数与一般的函数文件的编辑相同，而子函数则只能在主函数文件中编辑。<br>3、 当在MATLAB的M文件中调用函数时，首先检测该函数是否为此文件加下的子函数，若否，则检测是否为可用的私有函数，任然否，检测该函数是否为MATLAB搜索路径上的其他M文件。</p><h2 id="程序设计的优化"><a href="#程序设计的优化" class="headerlink" title="程序设计的优化"></a>程序设计的优化</h2><p>虽然在MATLAB语言中没有规定使用变量是必须先定义，但是对于未定义的变量，如果操作系统出现越界赋值时，系统将不得不对变量进行扩充，这样大大降低了程序的运行效率，对于可能出现变量的维度不断扩大的情况下，应当预先估计变量可能出现的最大维度，进行预定义。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/30/matlab基础知识/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Zhang Lei"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="YHNE's blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2019/07/30/matlab基础知识/" itemprop="url">matlab基础知识</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-30T11:41:03+08:00">2019-07-30 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/matlab学习/" itemprop="url" rel="index"><span itemprop="name">matlab学习</span> </a></span></span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/2019/07/30/matlab基础知识/#SOHUCS" itemprop="discussionUrl"><span id="url::http://yoursite.com/2019/07/30/matlab基础知识/" class="cy_cmt_count" data-xid="2019/07/30/matlab基础知识/" itemprop="commentsCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="matlab基本命令"><a href="#matlab基本命令" class="headerlink" title="matlab基本命令"></a>matlab基本命令</h2><p>1、 path命令<br>在matlab的命令行中输入可以得到matlab的所有搜索路径。使用path扩展搜索目录：path(path,’D:\matlab’)<br>2、 genpath命令<br>在命令行中输入可以得到，有MATLAB所有的搜索路径连接而成的一个长字符串。<br>3、 使addpath命令扩展目录<br>addpathD:\matlab -begin 将matlab添加到整个搜索路径的开始<br>addpathD:\matlab -end 将matlab添加到整个搜索路径的末尾。</p><h3 id="MATLAB帮助系统"><a href="#MATLAB帮助系统" class="headerlink" title="MATLAB帮助系统"></a>MATLAB帮助系统</h3><p>1、 帮助命令<br>help、help+函数名（类）、helpwin和helpdesk，其中后两个是用来调用MATLAB联机帮助窗口。<br>2、 lookfor函数<br>当用户不知道某个函数的确切名称，可以用lookfor函数，根据关键字搜索。<br>3、 其他的帮助命令</p><ul><li>who：内存变量列表</li><li>whos：内存变量的详细信息</li><li>what：目录中的文件列表</li><li>which：确定文件位置</li><li>exist：变量检验函数<h3 id="常用指令"><a href="#常用指令" class="headerlink" title="常用指令"></a>常用指令</h3>1、 cd：显示或者改变工作目录<br>2、 clc：清除工作窗<br>3、 clear：清除内存变量<h3 id="续行符"><a href="#续行符" class="headerlink" title="续行符"></a>续行符</h3>“…”用3个或3个以上的连续黑点表示“续行”</li></ul><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>主要的数据类型：数字，字符串，向量，矩阵，单元型数据及结构型数据</p><h3 id="变量与常量"><a href="#变量与常量" class="headerlink" title="变量与常量"></a>变量与常量</h3><p>在未加特殊说明的情况下，matlab语言将所识别的一切变量视为局部变量，仅在其使用的M文件内有效。如果要将其定义为全局变量<br>加关键字global。</p><h3 id="数字的显示格式"><a href="#数字的显示格式" class="headerlink" title="数字的显示格式"></a>数字的显示格式</h3><p>在默认的状态下，数据为整型，以整数表示，数据为实数，保留小数后4位的精度近式值。</p><h4 id="format控制数字显示格式"><a href="#format控制数字显示格式" class="headerlink" title="format控制数字显示格式"></a>format控制数字显示格式</h4><p>format long,pi ;15位定点表示<br>基本格式：format后加变量的类型用逗号隔开，加要输出的变量。</p><h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p>所有的字符串都用单引号设定后输入或赋值；字符串相关函数以str开头。</p><h3 id="向量"><a href="#向量" class="headerlink" title="向量"></a>向量</h3><ul><li>冒号法创建向量：x = first：increment：last；向量就相当于一维数组。</li><li>对数分隔的向量，x = logspace（first_value,last_value,number）</li></ul><h2 id="矩阵"><a href="#矩阵" class="headerlink" title="矩阵"></a>矩阵</h2><h3 id="矩阵的创建"><a href="#矩阵的创建" class="headerlink" title="矩阵的创建"></a>矩阵的创建</h3><ul><li>eye函数；创建单位矩阵；eye（size(A)） 创建和A相同的单位矩阵</li><li>rand函数，创建随机矩阵</li><li>compan(P) 创建系数向量是P的多项式伴随矩阵</li><li>diag(v) 创建一向量v中的元素为对角的对角阵</li><li>hilb(n) 创建nxn的Hilbert矩阵</li><li>zeros</li><li>ones</li></ul><h3 id="矩阵元素的修改"><a href="#矩阵元素的修改" class="headerlink" title="矩阵元素的修改"></a>矩阵元素的修改</h3><p>A(m,:) = [] ;删除A的第m行<br>A(:,n) = [] ;删除A的第n列<br>A(m,n) = a; 对m行n列的元素赋值</p><h2 id="单元型变量"><a href="#单元型变量" class="headerlink" title="单元型变量"></a>单元型变量</h2><p>单元型变量是以单元为元素的数组，每个元素称为单元，每个单元可以包含其他类型的数组，如实数矩阵、字符串，复数向量。单元<br>变量通常用{}创建，其数据通过数组下标来引用。A={}；</p><h2 id="结构型变量"><a href="#结构型变量" class="headerlink" title="结构型变量"></a>结构型变量</h2><p>结构型变量是根据属性名（field）组织起来的不同数据类型的集合。结构的任何一个属性可以包含不同的数据类型，如字符串，矩阵等。结构型变量用函数struct来创建。s = struct(‘field’,{},’field2’,{},…) ;s = struct(‘field’,values1,’field2,values2’)</p><h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><ul><li>.* 点乘</li><li>.^ 点乘方</li><li>./ 、 .\ 点右除，点左除</li><li>‘ 矩阵转置。当矩阵是复数时，求矩阵的共轭转置</li><li>.’ 矩阵转置。当矩阵是复数时，不求矩阵的共轭转置<br>注解：点运算是指元素点对点的运算，即矩阵内元素对元素之间的运算。点运算要求参与运算的变量在结构上必须是相似的。</li><li>~= 不等于</li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/25/stm32-uip心得/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Zhang Lei"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="YHNE's blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2019/06/25/stm32-uip心得/" itemprop="url">stm32 uip心得</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-06-25T11:40:21+08:00">2019-06-25 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/嵌入式网络通信/" itemprop="url" rel="index"><span itemprop="name">嵌入式网络通信</span> </a></span></span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/2019/06/25/stm32-uip心得/#SOHUCS" itemprop="discussionUrl"><span id="url::http://yoursite.com/2019/06/25/stm32-uip心得/" class="cy_cmt_count" data-xid="2019/06/25/stm32-uip心得/" itemprop="commentsCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="uip时钟"><a href="#uip时钟" class="headerlink" title="uip时钟"></a>uip时钟</h2><p>uIP-APP文件夹下的clock-arch.c文件是记录数据收发的时钟，即协议的系统心跳，系统心跳是用stm32中的定时器进行定时。<br>改变定时的时间即可改变数据的收发速度。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//clock-arch.c文件</span></span><br><span class="line"><span class="keyword">extern</span> u32 uip_timer;<span class="comment">//uip 计时器，每10ms增加1.</span></span><br><span class="line"><span class="comment">/*---------------------------------------------------------------------------*/</span></span><br><span class="line"><span class="keyword">clock_time_t</span></span><br><span class="line">clock_time(<span class="keyword">void</span>)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> uip_timer; <span class="comment">/* 10ms 单位 */</span>	 </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//定时器文件下的定时中断</span></span><br><span class="line"><span class="comment">//定时器6中断服务程序	 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TIM6_IRQHandler</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> SYSTEM_SUPPORT_OS 	</span></span><br><span class="line">	OSIntEnter();</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	<span class="keyword">if</span> (TIM_GetITStatus(TIM6, TIM_IT_Update) != RESET) <span class="comment">//检查指定的TIM中断发生与否:TIM 中断源 </span></span><br><span class="line">	&#123;</span><br><span class="line">        uip_timer++;<span class="comment">//uip计时器增加1	</span></span><br><span class="line">	&#125; </span><br><span class="line">		TIM_ClearITPendingBit(TIM6, TIM_IT_Update);  <span class="comment">//清除TIMx的中断待处理位:TIM 中断源 </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> SYSTEM_SUPPORT_OS	</span></span><br><span class="line">	OSIntExit();</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span>				    		  			    	    </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="服务器初始化"><a href="#服务器初始化" class="headerlink" title="服务器初始化"></a>服务器初始化</h2><p>1、 初始化硬件参数<br>2、 初始化uip协议<br>3、 绑定本机ip地址<br>4、 绑定网关<br>5、 设置网络掩码<br>6、 监听网路端口<br></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">     <span class="keyword">uip_ipaddr_t</span> ipaddr;  <span class="comment">//定义uipIP地址变量</span></span><br><span class="line">   <span class="comment">//初始化硬件芯片-----ENC28J60</span></span><br><span class="line">    <span class="keyword">while</span>(tapdev_init())	<span class="comment">//初始化ENC28J60错误</span></span><br><span class="line">&#123;								   </span><br><span class="line">	delay_ms(<span class="number">200</span>);	</span><br><span class="line">&#125;;</span><br><span class="line">   <span class="comment">//初始化uip协议</span></span><br><span class="line">   uip_init();				<span class="comment">//uIP初始化	</span></span><br><span class="line">   AnalyzeIpAddress();   <span class="comment">//解析IP地址</span></span><br><span class="line">   uip_ipaddr(ipaddr, UIP_DRIPADDR0,UIP_DRIPADDR1,UIP_DRIPADDR2,UIP_DRIPADDR3);	<span class="comment">//设置本地设置IP地址</span></span><br><span class="line">uip_sethostaddr(ipaddr);					    </span><br><span class="line">uip_ipaddr(ipaddr, UIP_DRIPADDR0,UIP_DRIPADDR1,UIP_DRIPADDR2,UIP_DRIPADDR2); 	<span class="comment">//设置网关IP地址(其实就是你路由器的IP地址)</span></span><br><span class="line">uip_setdraddr(ipaddr);						 </span><br><span class="line">uip_ipaddr(ipaddr, <span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0</span>);	<span class="comment">//设置网络掩码</span></span><br><span class="line">uip_setnetmask(ipaddr);</span><br><span class="line">   uip_listen(HTONS(<span class="number">1200</span>));			<span class="comment">//监听1200端口,用于TCP Server</span></span><br></pre></td></tr></table></figure><p></p><h2 id="网络事件处理"><a href="#网络事件处理" class="headerlink" title="网络事件处理"></a>网络事件处理</h2><p>uip_input(); IP包处理，该函数是和应用层结合的关键函数，该函数本质上是调用底层uip_process(UIP_DATA)函数，uip_process函数回调应用层的函数void tcp_server_demo_appcall(void)，<br>同理，事件轮询函数，即对每个client的事件的轮询函数uip_udp_periodic，都是调用uip_process，然后掉应应用层的回调函数，对每个client事件进行轮询。作为服务器可将数据发送到每个客户端。<br>在应用层里可以解析收到的数据和发送数据。(struct tcp_demo_appstate *)&amp;uip_conn-&gt;appstate; 该变量是存储需要发送的数据长度和数据内容。<br>底层存储发送数据用的是uip_conn结构体，该结构体类有对应的ip和相应的应用层的数据接口，收到和发送的数据都存储在uip_buf中，数据的长度存储在uip_len中。应用层所有的操作都是对<br>底层变量uip_buf,和uip_len进行赋值。发送数据都先调用uip_arp_out()函数;加以太网头结构，然后调用硬件网格芯片接口函数tapdev_send();发送数据到以太网。在此之前已经在应用层回调函数中对发送的数据进行<br>赋值，即对uip_buf,和uip_len 进行了赋值。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//应用层发送函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tcp_server_senddata</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">tcp_demo_appstate</span> *<span class="title">s</span> = (<span class="title">struct</span> <span class="title">tcp_demo_appstate</span> *)&amp;<span class="title">uip_conn</span>-&gt;<span class="title">appstate</span>;</span></span><br><span class="line">	<span class="comment">//s-&gt;textptr : 发送的数据包缓冲区指针</span></span><br><span class="line">	<span class="comment">//s-&gt;textlen ：数据包的大小（单位字节）		   </span></span><br><span class="line">	<span class="keyword">if</span>(s-&gt;textlen&gt;<span class="number">0</span>)uip_send(s-&gt;textptr, s-&gt;textlen);<span class="comment">//发送TCP数据包	 </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//底层发送函数，对底层uip_buf变量进行赋值，对uip_len进行赋值</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">uip_send</span><span class="params">(<span class="keyword">const</span> <span class="keyword">void</span> *data, <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(len &gt; <span class="number">0</span>) </span><br><span class="line">  &#123;</span><br><span class="line">    uip_slen = len;</span><br><span class="line">    <span class="keyword">if</span>(data != uip_sappdata) </span><br><span class="line">    &#123;</span><br><span class="line">      <span class="built_in">memcpy</span>(uip_sappdata, (data), uip_slen);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//真正的发送函数</span></span><br><span class="line">tapdev_send();<span class="comment">//发送数据到以太网，该数是对网络芯片的操作。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//应用层的回调函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tcp_server_demo_appcall</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">tcp_demo_appstate</span> *<span class="title">s</span> = (<span class="title">struct</span> <span class="title">tcp_demo_appstate</span> *)&amp;<span class="title">uip_conn</span>-&gt;<span class="title">appstate</span>;</span></span><br><span class="line">	<span class="keyword">if</span>(uip_aborted())tcp_server_aborted();		<span class="comment">//连接终止</span></span><br><span class="line"> 	<span class="keyword">if</span>(uip_timedout())tcp_server_timedout();	<span class="comment">//连接超时   </span></span><br><span class="line">	<span class="keyword">if</span>(uip_closed())tcp_server_closed();		<span class="comment">//连接关闭	   </span></span><br><span class="line"> 	<span class="keyword">if</span>(uip_connected())tcp_server_connected();	<span class="comment">//连接成功	    </span></span><br><span class="line">	<span class="keyword">if</span>(uip_acked())tcp_server_acked();			<span class="comment">//发送的数据成功送达 </span></span><br><span class="line">	<span class="comment">//接收到一个新的TCP数据包 </span></span><br><span class="line">	<span class="keyword">if</span> (uip_newdata())<span class="comment">//收到客户端发过来的数据</span></span><br><span class="line">	&#123;</span><br><span class="line">			<span class="keyword">if</span>(uip_len&gt;<span class="number">199</span>)</span><br><span class="line">			&#123;		   </span><br><span class="line">				((u8*)uip_appdata)[<span class="number">199</span>]=<span class="number">0</span>;</span><br><span class="line">			&#125;		    </span><br><span class="line">	    	<span class="built_in">strcpy</span>((<span class="keyword">char</span>*)tcp_server_receive,uip_appdata);	</span><br><span class="line">			tcp_server_sta|=<span class="number">1</span>&lt;&lt;<span class="number">6</span>;<span class="comment">//表示收到客户端数据</span></span><br><span class="line">            <span class="comment">//反馈信息可在这儿赋值</span></span><br><span class="line">            </span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(tcp_server_sta&amp;(<span class="number">1</span>&lt;&lt;<span class="number">5</span>))<span class="comment">//有数据需要发送</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(sendFlag &lt; clientFlag)</span><br><span class="line">        &#123;</span><br><span class="line">            s-&gt;textptr=tcp_server_sendCache;</span><br><span class="line">            s-&gt;textlen=<span class="built_in">strlen</span>((<span class="keyword">const</span> <span class="keyword">char</span>*)tcp_server_sendCache);</span><br><span class="line">            sendFlag++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            sendFlag = <span class="number">0</span>;</span><br><span class="line">            tcp_server_sta&amp;=~(<span class="number">1</span>&lt;&lt;<span class="number">5</span>);<span class="comment">//清除标记</span></span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">	&#125;   </span><br><span class="line">	<span class="comment">//当需要重发、新数据到达、数据包送达、连接建立时，通知uip发送数据 </span></span><br><span class="line">	<span class="keyword">if</span>(uip_rexmit()||uip_newdata()||uip_acked()||uip_connected()||uip_poll())</span><br><span class="line">	&#123;</span><br><span class="line">		tcp_server_senddata();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//网络事件处理函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//uip事件处理函数</span></span><br><span class="line"><span class="comment">//必须将该函数插入用户主循环,循环调用.</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">uip_polling</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	u8 i;</span><br><span class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">struct</span> <span class="title">timer</span> <span class="title">periodic_timer</span>, <span class="title">arp_timer</span>;</span></span><br><span class="line">	<span class="keyword">static</span> u8 timer_ok=<span class="number">0</span>;	 </span><br><span class="line">	<span class="keyword">if</span>(timer_ok==<span class="number">0</span>)<span class="comment">//仅初始化一次</span></span><br><span class="line">	&#123;</span><br><span class="line">		timer_ok = <span class="number">1</span>;</span><br><span class="line">		timer_set(&amp;periodic_timer,CLOCK_SECOND/<span class="number">2</span>);  <span class="comment">//创建1个0.5秒的定时器 </span></span><br><span class="line">		timer_set(&amp;arp_timer,CLOCK_SECOND*<span class="number">10</span>);	   	<span class="comment">//创建1个10秒的定时器 </span></span><br><span class="line">	&#125;				 </span><br><span class="line">	uip_len=tapdev_read();	<span class="comment">//从网络设备读取一个IP包,得到数据长度.uip_len在uip.c中定义</span></span><br><span class="line">	<span class="keyword">if</span>(uip_len&gt;<span class="number">0</span>) 			<span class="comment">//有数据</span></span><br><span class="line">	&#123;   </span><br><span class="line">		<span class="comment">//处理IP数据包(只有校验通过的IP包才会被接收) </span></span><br><span class="line">		<span class="keyword">if</span>(BUF-&gt;type == htons(UIP_ETHTYPE_IP))<span class="comment">//是否是IP包? </span></span><br><span class="line">		&#123;</span><br><span class="line">			uip_arp_ipin();	<span class="comment">//去除以太网头结构，更新ARP表</span></span><br><span class="line">			uip_input();   	<span class="comment">//IP包处理</span></span><br><span class="line">			<span class="comment">//当上面的函数执行后，如果需要发送数据，则全局变量 uip_len &gt; 0</span></span><br><span class="line">			<span class="comment">//需要发送的数据在uip_buf, 长度是uip_len  (这是2个全局变量)		    </span></span><br><span class="line">			<span class="keyword">if</span>(uip_len&gt;<span class="number">0</span>)<span class="comment">//需要回应数据</span></span><br><span class="line">			&#123;</span><br><span class="line">				uip_arp_out();<span class="comment">//加以太网头结构，在主动连接时可能要构造ARP请求</span></span><br><span class="line">				tapdev_send();<span class="comment">//发送数据到以太网</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (BUF-&gt;type==htons(UIP_ETHTYPE_ARP))<span class="comment">//处理arp报文,是否是ARP请求包?</span></span><br><span class="line">		&#123;</span><br><span class="line">			uip_arp_arpin();</span><br><span class="line"> 			<span class="comment">//当上面的函数执行后，如果需要发送数据，则全局变量uip_len&gt;0</span></span><br><span class="line">			<span class="comment">//需要发送的数据在uip_buf, 长度是uip_len(这是2个全局变量)</span></span><br><span class="line"> 			<span class="keyword">if</span>(uip_len&gt;<span class="number">0</span>)tapdev_send();<span class="comment">//需要发送数据,则通过tapdev_send发送	 </span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(timer_expired(&amp;periodic_timer))	<span class="comment">//0.5秒定时器超时</span></span><br><span class="line">	&#123;</span><br><span class="line">		timer_reset(&amp;periodic_timer);		<span class="comment">//复位0.5秒定时器 </span></span><br><span class="line">		<span class="comment">//轮流处理每个TCP连接, UIP_CONNS缺省是40个  </span></span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;UIP_CONNS;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			uip_periodic(i);	<span class="comment">//处理TCP通信事件  </span></span><br><span class="line">	 		<span class="comment">//当上面的函数执行后，如果需要发送数据，则全局变量uip_len&gt;0</span></span><br><span class="line">			<span class="comment">//需要发送的数据在uip_buf, 长度是uip_len (这是2个全局变量)</span></span><br><span class="line">	 		<span class="keyword">if</span>(uip_len&gt;<span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				uip_arp_out();<span class="comment">//加以太网头结构，在主动连接时可能要构造ARP请求</span></span><br><span class="line">				tapdev_send();<span class="comment">//发送数据到以太网</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> UIP_UDP	<span class="comment">//UIP_UDP </span></span></span><br><span class="line">		<span class="comment">//轮流处理每个UDP连接, UIP_UDP_CONNS缺省是10个</span></span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;UIP_UDP_CONNS;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			uip_udp_periodic(i);	<span class="comment">//处理UDP通信事件</span></span><br><span class="line">	 		<span class="comment">//当上面的函数执行后，如果需要发送数据，则全局变量uip_len&gt;0</span></span><br><span class="line">			<span class="comment">//需要发送的数据在uip_buf, 长度是uip_len (这是2个全局变量)</span></span><br><span class="line">			<span class="keyword">if</span>(uip_len &gt; <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				uip_arp_out();<span class="comment">//加以太网头结构，在主动连接时可能要构造ARP请求</span></span><br><span class="line">				tapdev_send();<span class="comment">//发送数据到以太网</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> </span></span><br><span class="line">		<span class="comment">//每隔10秒调用1次ARP定时器函数 用于定期ARP处理,ARP表10秒更新一次，旧的条目会被抛弃</span></span><br><span class="line">		<span class="keyword">if</span>(timer_expired(&amp;arp_timer))</span><br><span class="line">		&#123;</span><br><span class="line">			timer_reset(&amp;arp_timer);</span><br><span class="line">			uip_arp_timer();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/03/Plotly与机器学习/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Zhang Lei"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="YHNE's blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2019/06/03/Plotly与机器学习/" itemprop="url">Plotly与机器学习</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-06-03T15:43:06+08:00">2019-06-03 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Python数据分析/" itemprop="url" rel="index"><span itemprop="name">Python数据分析</span> </a></span></span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/2019/06/03/Plotly与机器学习/#SOHUCS" itemprop="discussionUrl"><span id="url::http://yoursite.com/2019/06/03/Plotly与机器学习/" class="cy_cmt_count" data-xid="2019/06/03/Plotly与机器学习/" itemprop="commentsCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="分类问题"><a href="#分类问题" class="headerlink" title="分类问题"></a>分类问题</h2><h3 id="用SVM对经典的IRIS数据集（鸢尾花）进行分类"><a href="#用SVM对经典的IRIS数据集（鸢尾花）进行分类" class="headerlink" title="用SVM对经典的IRIS数据集（鸢尾花）进行分类"></a>用SVM对经典的IRIS数据集（鸢尾花）进行分类</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 3.1 SVM</span></span><br><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> svm, datasets</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.plot</span><br><span class="line">iris = datasets.load_iris()</span><br><span class="line">X = iris.data[:, :<span class="number">2</span>] <span class="comment"># 只去前两个特征</span></span><br><span class="line">Y = iris.target      <span class="comment"># 分类标签</span></span><br><span class="line">h = <span class="number">.02</span>  <span class="comment"># 设定网格大小</span></span><br><span class="line">clf = svm.SVC(kernel=<span class="string">'linear'</span>)</span><br><span class="line">clf.fit(X, Y)</span><br><span class="line"></span><br><span class="line">x_min, x_max = X[:, <span class="number">0</span>].min() - <span class="number">1</span>, X[:, <span class="number">0</span>].max() + <span class="number">1</span></span><br><span class="line">y_min, y_max = X[:, <span class="number">1</span>].min() - <span class="number">1</span>, X[:, <span class="number">1</span>].max() + <span class="number">1</span></span><br><span class="line">x_ = np.arange(x_min, x_max, h)</span><br><span class="line">y_ =  np.arange(y_min, y_max, h)</span><br><span class="line">xx, yy = np.meshgrid(x_, y_)</span><br><span class="line">Z = clf.predict(np.c_[xx.ravel(), yy.ravel()]) <span class="comment"># xx.ravel() 返回连续扁平的数组</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Put the result into a color plot</span></span><br><span class="line">Z = Z.reshape(xx.shape)</span><br><span class="line"></span><br><span class="line">cmap = [[<span class="number">1.0</span>,<span class="string">'RGB(10,64,159)'</span>],[<span class="number">0.5</span>,<span class="string">'RGB(5,159,126)'</span>],[<span class="number">1.0</span>,<span class="string">'RGB(159,26,64)'</span>]]</span><br><span class="line"><span class="comment"># 画布</span></span><br><span class="line">trace1 = go.Heatmap(x=x_, y=y_, z=Z,</span><br><span class="line">                    colorscale=cmap,</span><br><span class="line">                    showscale=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 画点</span></span><br><span class="line">trace2 = go.Scatter(x=X[:, <span class="number">0</span>], y=X[:, <span class="number">1</span>], </span><br><span class="line">                    mode=<span class="string">'markers'</span>,</span><br><span class="line">                    marker=dict(color=Y, </span><br><span class="line">                                colorscale=cmap, </span><br><span class="line">                                showscale=<span class="literal">False</span>,</span><br><span class="line">                                line=dict(color=<span class="string">'black'</span>, width=<span class="number">1</span>)))</span><br><span class="line"></span><br><span class="line">layout = go.Layout(title=<span class="string">"3-Class classification using Support Vector Machine with linear kernel"</span>)</span><br><span class="line">fig = go.Figure(data= [trace1, trace2], layout=layout)</span><br><span class="line">pyplt(fig, filename = <span class="string">r'tmp\SVM_clustering.html'</span>)</span><br></pre></td></tr></table></figure><p>绘制热力图时，用到了Plotly.graph_objs中的Heatmap函数，函数中的x，y，z三个参数分别对应X轴坐标，Y坐标，以及X轴线与Y轴线相交所得的每个小方块的颜色。<br>如果传递给x参数的大小是a，传递给y参数的大小是b，则传递给z参数的大小为a*b的矩阵。</p><h2 id="回归问题"><a href="#回归问题" class="headerlink" title="回归问题"></a>回归问题</h2><p>本案例使用三种模型（RBF、Linear、Plotlynomial）进行回归实践，并可视化结果，数据使用NumPy随机生成。<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line"><span class="comment"># 3.2 SVR</span></span><br><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVR</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.plot</span><br><span class="line"></span><br><span class="line">X = np.sort(<span class="number">5</span> * np.random.rand(<span class="number">40</span>, <span class="number">1</span>), axis=<span class="number">0</span>)</span><br><span class="line">y = np.sin(X).ravel()</span><br><span class="line">y[::<span class="number">5</span>] += <span class="number">3</span> * (<span class="number">0.5</span> - np.random.rand(<span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">svr_rbf = SVR(kernel=<span class="string">'rbf'</span>, C=<span class="number">1e3</span>, gamma=<span class="number">0.1</span>)</span><br><span class="line">svr_lin = SVR(kernel=<span class="string">'linear'</span>, C=<span class="number">1e3</span>)</span><br><span class="line">svr_poly = SVR(kernel=<span class="string">'poly'</span>, C=<span class="number">1e3</span>, degree=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">y_rbf = svr_rbf.fit(X, y).predict(X)</span><br><span class="line">y_lin = svr_lin.fit(X, y).predict(X)</span><br><span class="line">y_poly = svr_poly.fit(X, y).predict(X)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">data_to_plotly</span><span class="params">(x)</span>:</span></span><br><span class="line">    k = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(x)):</span><br><span class="line">        k.append(x[i][<span class="number">0</span>])</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> k</span><br><span class="line"></span><br><span class="line">lw = <span class="number">2</span></span><br><span class="line">p1 = go.Scatter(x=data_to_plotly(X), y=y,</span><br><span class="line">                mode=<span class="string">'markers'</span>,</span><br><span class="line">                marker=dict(color=<span class="string">'darkorange'</span>),</span><br><span class="line">                name=<span class="string">'data'</span>)</span><br><span class="line"></span><br><span class="line">p2 = go.Scatter(x=data_to_plotly(X), y=y_rbf, </span><br><span class="line">                mode=<span class="string">'lines'</span>,</span><br><span class="line">                line=dict(color=<span class="string">'navy'</span>, width=lw),</span><br><span class="line">                name=<span class="string">'RBF model'</span>)</span><br><span class="line"></span><br><span class="line">p3 = go.Scatter(x=data_to_plotly(X), y=y_lin, </span><br><span class="line">                mode=<span class="string">'lines'</span>,</span><br><span class="line">                line=dict(color=<span class="string">'cyan'</span>, width=lw),</span><br><span class="line">                name=<span class="string">'Linear model'</span>)</span><br><span class="line"></span><br><span class="line">p4 = go.Scatter(x=data_to_plotly(X), y=y_poly, </span><br><span class="line">                mode=<span class="string">'lines'</span>, </span><br><span class="line">                line=dict(color=<span class="string">'cornflowerblue'</span>, width=lw),</span><br><span class="line">                name=<span class="string">'Polynomial model'</span>)</span><br><span class="line"></span><br><span class="line">layout = go.Layout(title=<span class="string">'Support Vector Regression'</span>,</span><br><span class="line">                   hovermode=<span class="string">'closest'</span>,</span><br><span class="line">                   xaxis=dict(title=<span class="string">'data'</span>),</span><br><span class="line">                   yaxis=dict(title=<span class="string">'target'</span>))</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=[p1, p2, p3, p4], layout=layout)</span><br><span class="line">pyplt(fig, filename = <span class="string">r'tmp\SVR.html'</span>)</span><br></pre></td></tr></table></figure><p></p><h2 id="聚类问题"><a href="#聚类问题" class="headerlink" title="聚类问题"></a>聚类问题</h2><p>聚类结果可视化一般分为两部分，一个是画出聚类中心点，另一个是将同类别的数据绘制为同一种颜色。这里仍然使用Scatter函数完成。<br>案列分为三部分，第一部分产生聚类数据，第二部分是使用K-means算法与MiniBatchKmeans算法训练模型；第三部分是绘制三张图片。第一张是K-means分类的结果；<br>第二张是MiniBatchKmeans分类的结果，第三张是突出两种分类结果的差异。<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">from</span> plotly <span class="keyword">import</span> tools</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sklearn.cluster <span class="keyword">import</span> MiniBatchKMeans, KMeans</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics.pairwise <span class="keyword">import</span> pairwise_distances_argmin</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets.samples_generator <span class="keyword">import</span> make_blobs</span><br><span class="line"></span><br><span class="line"><span class="comment"># 产生随机数据</span></span><br><span class="line">np.random.seed(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">batch_size = <span class="number">45</span></span><br><span class="line">centers = [[<span class="number">1</span>, <span class="number">1</span>], [<span class="number">-1</span>, <span class="number">-1</span>], [<span class="number">1</span>, <span class="number">-1</span>]]</span><br><span class="line">n_clusters = len(centers)</span><br><span class="line">X, labels_true = make_blobs(n_samples = <span class="number">3000</span>, centers = centers, cluster_std = <span class="number">0.7</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># n_samples是待生成的样本的总数</span></span><br><span class="line"><span class="comment"># centers表示类别数</span></span><br><span class="line"><span class="comment"># cluster_std表示每个类别的方差，例如我们希望生成2类数据，其中一类比另一类具有更大的方差，可以将cluster_std设置为[1.0,3.0]。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用K-means算法</span></span><br><span class="line">k_means = KMeans(init = <span class="string">'k-means++'</span>, n_clusters = <span class="number">3</span>, n_init = <span class="number">10</span>)</span><br><span class="line">t0 = time.time()</span><br><span class="line">k_means.fit(X)</span><br><span class="line">t_batch = time.time() - t0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用MiniBatchKMeans算法</span></span><br><span class="line">mbk = MiniBatchKMeans(init = <span class="string">'k-means++'</span>, n_clusters = <span class="number">3</span>, batch_size = batch_size,</span><br><span class="line">                      n_init = <span class="number">10</span>, max_no_improvement = <span class="number">10</span>, verbose = <span class="number">0</span>)</span><br><span class="line">t0 = time.time()</span><br><span class="line">mbk.fit(X)</span><br><span class="line">t_mini_batch = time.time() - t0</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.plot</span><br><span class="line">colors = [<span class="string">'#4EACC5'</span>, <span class="string">'#FF9C34'</span>, <span class="string">'#4E9A06'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># We want to have the same colors for the same cluster from the</span></span><br><span class="line"><span class="comment"># MiniBatchKMeans and the KMeans algorithm. Let's pair the cluster centers per</span></span><br><span class="line"><span class="comment"># closest one.</span></span><br><span class="line">k_means_cluster_centers = np.sort(k_means.cluster_centers_, axis=<span class="number">0</span>)</span><br><span class="line">mbk_means_cluster_centers = np.sort(mbk.cluster_centers_, axis=<span class="number">0</span>)</span><br><span class="line"><span class="comment"># Compute minimum distances between one point and a set of points</span></span><br><span class="line">k_means_labels = pairwise_distances_argmin(X, k_means_cluster_centers)</span><br><span class="line">mbk_means_labels = pairwise_distances_argmin(X, mbk_means_cluster_centers)</span><br><span class="line">order = pairwise_distances_argmin(k_means_cluster_centers,</span><br><span class="line">                                  mbk_means_cluster_centers)</span><br><span class="line"><span class="comment">#第一张图</span></span><br><span class="line">fig = tools.make_subplots(rows=<span class="number">1</span>, cols=<span class="number">3</span>,</span><br><span class="line">                          print_grid=<span class="literal">False</span>,</span><br><span class="line">                          subplot_titles=(<span class="string">'KMeans&lt;br&gt;train time: %.2fs\ninertia: %f'</span> %</span><br><span class="line">                                          (t_mini_batch, mbk.inertia_),</span><br><span class="line">                                          <span class="string">'MiniBatchKmeans&lt;br&gt;train time: %.2fs\ninertia: %f'</span> %</span><br><span class="line">                                          (t_mini_batch, mbk.inertia_), </span><br><span class="line">                                          <span class="string">'Difference'</span>))</span><br><span class="line"><span class="comment"># k-means</span></span><br><span class="line"><span class="keyword">for</span> k, col <span class="keyword">in</span> zip(range(n_clusters), colors):</span><br><span class="line">    my_members = k_means_labels == k</span><br><span class="line">    cluster_center = k_means_cluster_centers[k]</span><br><span class="line">    kmeans1 = go.Scatter(x=X[my_members, <span class="number">0</span>], y=X[my_members, <span class="number">1</span>],</span><br><span class="line">                         showlegend=<span class="literal">False</span>,</span><br><span class="line">                         mode=<span class="string">'markers'</span>, marker=dict(color=col, size=<span class="number">4</span>))</span><br><span class="line">    kmeans2 = go.Scatter(x=[cluster_center[<span class="number">0</span>]], y=[cluster_center[<span class="number">1</span>]],</span><br><span class="line">                         showlegend=<span class="literal">False</span>,</span><br><span class="line">                         mode=<span class="string">'markers'</span>, marker=dict(color=col, size=<span class="number">14</span>,</span><br><span class="line">                                                    line=dict(color=<span class="string">'black'</span>,</span><br><span class="line">                                                              width=<span class="number">1</span>)))</span><br><span class="line">    fig.append_trace(kmeans1, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">    fig.append_trace(kmeans2, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line">fig[<span class="string">'layout'</span>][<span class="string">'xaxis1'</span>].update(showticklabels=<span class="literal">False</span>, ticks=<span class="string">''</span>,</span><br><span class="line">                               zeroline=<span class="literal">False</span>, showgrid=<span class="literal">False</span>)</span><br><span class="line">fig[<span class="string">'layout'</span>][<span class="string">'yaxis1'</span>].update(showticklabels=<span class="literal">False</span>, ticks=<span class="string">''</span>,</span><br><span class="line">                               zeroline=<span class="literal">False</span>, showgrid=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># minibatchkmeans 第二张图</span></span><br><span class="line"><span class="keyword">for</span> k, col <span class="keyword">in</span> zip(range(n_clusters), colors):</span><br><span class="line">    my_members = mbk_means_labels == order[k]</span><br><span class="line">    cluster_center = mbk_means_cluster_centers[order[k]]</span><br><span class="line">    minibatchkmeans1 = go.Scatter(x=X[my_members, <span class="number">0</span>], y=X[my_members, <span class="number">1</span>],</span><br><span class="line">                                 showlegend=<span class="literal">False</span>,</span><br><span class="line">                                 mode=<span class="string">'markers'</span>, marker=dict(color=col, size=<span class="number">4</span>))</span><br><span class="line">    minibatchkmeans2 = go.Scatter(x=[cluster_center[<span class="number">0</span>]], y=[cluster_center[<span class="number">1</span>]],</span><br><span class="line">                                 showlegend=<span class="literal">False</span>,</span><br><span class="line">                                 mode=<span class="string">'markers'</span>, marker=dict(color=col, size=<span class="number">14</span>,</span><br><span class="line">                                                            line=dict(color=<span class="string">'black'</span>,</span><br><span class="line">                                                                      width=<span class="number">1</span>)))</span><br><span class="line">    fig.append_trace(minibatchkmeans1, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    fig.append_trace(minibatchkmeans2, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">fig[<span class="string">'layout'</span>][<span class="string">'xaxis2'</span>].update(showticklabels=<span class="literal">False</span>, ticks=<span class="string">''</span>,</span><br><span class="line">                               zeroline=<span class="literal">False</span>, showgrid=<span class="literal">False</span>)</span><br><span class="line">fig[<span class="string">'layout'</span>][<span class="string">'yaxis2'</span>].update(showticklabels=<span class="literal">False</span>, ticks=<span class="string">''</span>,</span><br><span class="line">                               zeroline=<span class="literal">False</span>, showgrid=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Initialise the different array to all False第三张图</span></span><br><span class="line">different = (mbk_means_labels == <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> range(n_clusters):</span><br><span class="line">    different += ((k_means_labels == k) != (mbk_means_labels == order[k]))</span><br><span class="line"></span><br><span class="line">identic = np.logical_not(different)</span><br><span class="line">difference1 = go.Scatter(x=X[identic, <span class="number">0</span>], y=X[identic, <span class="number">1</span>],</span><br><span class="line">                         showlegend=<span class="literal">False</span>,</span><br><span class="line">                         mode=<span class="string">'markers'</span>, marker=dict(color=<span class="string">'#bbbbbb'</span>, size=<span class="number">4</span>))</span><br><span class="line">        </span><br><span class="line">difference2 = go.Scatter(x=X[different, <span class="number">0</span>], y=X[different, <span class="number">1</span>], </span><br><span class="line">                         showlegend=<span class="literal">False</span>,</span><br><span class="line">                         mode=<span class="string">'markers'</span>, marker=dict(color=<span class="string">'magenta'</span>, size=<span class="number">4</span>))</span><br><span class="line"></span><br><span class="line">fig.append_trace(difference1, <span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">fig.append_trace(difference2, <span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">fig[<span class="string">'layout'</span>][<span class="string">'xaxis3'</span>].update(showticklabels=<span class="literal">False</span>, ticks=<span class="string">''</span>,</span><br><span class="line">                               zeroline=<span class="literal">False</span>, showgrid=<span class="literal">False</span>)</span><br><span class="line">fig[<span class="string">'layout'</span>][<span class="string">'yaxis3'</span>].update(showticklabels=<span class="literal">False</span>, ticks=<span class="string">''</span>,</span><br><span class="line">                               zeroline=<span class="literal">False</span>, showgrid=<span class="literal">False</span>)</span><br><span class="line">pyplt(fig, filename = <span class="string">r'tmp\K-means.html'</span>)</span><br></pre></td></tr></table></figure><p></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article></section><nav class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a></nav></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><section class="site-overview-wrap sidebar-panel sidebar-panel-active"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">Zhang Lei</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">84</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">27</span> <span class="site-state-item-name">categories</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">55</span> <span class="site-state-item-name">tags</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Zhang Lei</span></div><div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div><span class="post-meta-divider">|</span><div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/lib/three/three.min.js"></script><script type="text/javascript" src="/lib/three/three-waves.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><script id="cy_cmt_num" src="https://changyan.sohu.com/upload/plugins/plugins.list.count.js?clientId=cytRlKLcx"></script><script type="text/javascript">var isfetched=!1,isXml=!0,search_path="search.xml",path=(0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1),"/"+search_path),onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")};function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var searchFunc=function(t,s,a){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");function e(){var e,m=n.value.trim().toLowerCase(),x=m.split(/[\s\-]+/),w=(1<x.length&&x.push(m),[]);0<m.length&&o.forEach(function(t){var e=!1,o=0,h=0,n=t.title.trim(),r=n.toLowerCase(),s=t.content.trim().replace(/<[^>]+>/g,""),a=s.toLowerCase(),i=decodeURIComponent(t.url),c=[],l=[];if(""!=n&&(x.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r,s=0,a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());-1<(r=e.indexOf(t,s));)a.push({position:r,word:t}),s=r+n;return a}c=c.concat(e(t,r,!1)),l=l.concat(e(t,a,!1))}),0<c.length||0<l.length)&&(e=!0,o=c.length+l.length),e){function p(t,e,o,n){for(var r=n[n.length-1],s=r.position,a=r.word,i=[],c=0;s+a.length<=o&&0!=n.length;){a===m&&c++,i.push({position:s,length:a.length});var l=s+a.length;for(n.pop();0!=n.length&&(s=(r=n[n.length-1]).position,a=r.word,s<l);)n.pop()}return h+=c,{hits:i,start:e,end:o,searchTextCount:c}}[c,l].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});for(var t=[],u=(0!=c.length&&t.push(p(0,0,n.length,c)),[]);0!=l.length;){var f=l[l.length-1],d=f.position,f=f.word,g=d-20,v=d+80;g<0&&(g=0),(v=v<d+f.length?d+f.length:v)>s.length&&(v=s.length),u.push(p(0,g,v,l))}u.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});e=parseInt("1");function $(o,t){var n="",r=t.start;return t.hits.forEach(function(t){n+=o.substring(r,t.position);var e=t.position+t.length;n+='<b class="search-keyword">'+o.substring(t.position,e)+"</b>",r=e}),n+=o.substring(r,t.end)}0<=e&&(u=u.slice(0,e));var C="";C+=0!=t.length?"<li><a href='"+i+"' class='search-result-title'>"+$(n,t[0])+"</a>":"<li><a href='"+i+"' class='search-result-title'>"+n+"</a>",u.forEach(function(t){C+="<a href='"+i+'\'><p class="search-result">'+$(s,t)+"...</p></a>"}),C+="</li>",w.push({item:C,searchTextCount:h,hitCount:o,id:w.length})}}),1===x.length&&""===x[0]?r.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>':0===w.length?r.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>':(w.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id}),e='<ul class="search-result-list">',w.forEach(function(t){e+=t.item}),e+="</ul>",r.innerHTML=e)}var o=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,n=document.getElementById(s),r=document.getElementById(a);n.addEventListener("input",e),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),!1===isfetched?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){27===t.which&&$(".search-popup").is(":visible")&&onPopupClose()})</script></body></html>